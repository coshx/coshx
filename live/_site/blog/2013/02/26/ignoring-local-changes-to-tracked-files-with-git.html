<p>Most of us know we can use the <code>.gitignore</code> file to tell git to completely ignore certain untracked files, but what about tracked files?</p>

<h2>Example: Custom local Rails database configuration</h2>

<p>Rails tries to be database-agnostic, so many Rails apps work happily with many flavors of SQL.  Brand-new Rails apps use SQLite by default, a good choice because it has no dependencies on system packages.  What happens when the time comes that you want to develop locally against Postgres instead?</p>

<h2>config/database.yml</h2>

<p>Your Rails app database is configured in <code>config/database.yml</code> which is checked into git by default.  If you modify it to use Postgres, git will mark your database.yml as changed, cluttering up your <code>git status</code> and unwantedly staging your database.yml when you run <code>git add .</code> or <code>git commit -a</code>.</p>

<h2>Solution 1: Remove database.yml from the index and add it it to .gitignore</h2>

<p>Simply <code>git rm --cached config/database.yml</code>, commit the removal with <code>git commit -a</code>, and add database.yml to .gitignore.  Perhaps copy the original database.yml to database.yml.example and add a note to your README about copying the example file after cloning the repo.</p>

<p>The problem with this solution is you're adding an extra step that others must take before running and contributing to you app, when really you only want to cause changes on your own machine.</p>

<h2>Solution 2: Mark database.yml as assume-unchanged in git's index</h2>

<p>In fact git has the power to ignore local changes to tracked files, but it's slightly clunkier than and completely inconsistent with the familiar .gitignore.  You must use <code>git update-index</code> to tell git to ignore changes to the file:</p>

<p><code>bash
$ git update-index --assume-unchanged config/database.yml
</code></p>

<p>Now your git status will be clean, and you will have no unwanted results when you run things like <code>git add .</code> and <code>git commit -a</code>.  And when somebody upstream modifies database.yml, git will ask you to resolve the conflict.  Perfect.</p>

<p>To un-mark the file as assume-unchanged:</p>

<p><code>bash
$ git update-index --no-assume-unchanged config/database.yml
</code></p>

<p>And if you want a list of tracked files that git is ignoring:</p>

<p><code>bash
$ git ls-files -v | grep ^[a-z]
</code></p>

<p>Enjoy.</p>
